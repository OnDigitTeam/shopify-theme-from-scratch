{%- style -%}
  #shopify-section-{{ section.id }} {
    --section-inner-padding : {{ section.settings.inner_padding }}px;
    --section-inner-mobile-padding : {{ section.settings.innner_mobile_padding }}px;
    --section-colors_background: {{ section.settings.colors_background }};
    --section-tab-colors-heading : {{ section.settings.tab_colors_heading }};
    --section-tab-colors-text : {{ section.settings.tab_colors_text }};
    --section-tab-colors-border : {{ section.settings.tab_colors_border }};
  }
{%- endstyle -%}

{{ 'section-tab-collage.css' | asset_url | stylesheet_tag }}
{{ 'section-tab-collage.js' | asset_url | script_tag }}

<style>
  {% if section.settings.use_custom_colors %}
      .tab-collage .text__grid-item{
        background-color:var(--section-colors_background);
    }
    .tab-collage .accordion-tab {
        color: var(--section-tab-colors-heading);
    }
    .tab-collage .accordion-item{
    border-bottom:2px solid var(--section-tab-colors-border);
    }
     .tab-collage .accordion-content {
        color:var(--section-tab-colors-text);
     }
  {% endif %}
</style>

{% assign first_tab = 1 %}

<section class="section--padding tab-collage-section">
  <div class="page-width page-width--full-width">
    <div class="tab-collage grid {% if section.settings.desktop-layout == "image_first" %} desktop-grid--reverse {% endif %} {% if section.settings.mobile-layout == "image_first" %} mobile-grid--reverse {% endif %} grid--gapless grid--1-col grid--2-col-tablet">
      <!-- Column 1: Accordion -->
      <div class="grid__item text__grid-item">
        <div class="accordion">
          {% assign first_tab = 1 %}
          {%- for block in section.blocks -%}
            {%- if block.type == 'tab' -%}
              <div class="accordion-item{% if first_tab == 1 %} active{% endif %}" data-index="{{ forloop.index0 }}">
                <div class="accordion-tab">
                  <span class="{{section.settings.desktop_tab_heading_size}} {{ section.settings.mobile_tab_heading_size }}">
                    {{ block.settings.tab_heading }}
                  </span>
                  <svg class="accordion-icon" width="16" height="16" viewBox="0 0 24 24">
                    <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none" />
                  </svg>
                </div>
                <div class="accordion-content {{ section.settings.desktop_tab_content_size }} {{ section.settings.mobile_tab_content_size }}">
                  {{ block.settings.tab_content }}
                </div>
              </div>
              {% assign first_tab = 2 %}
            {%- endif -%}
          {%- endfor -%}
        </div>
      </div>

      <!-- Column 2: Image -->
      <div class="grid__item" style="padding:0;">
        <div class="image-animate media media--{{ section.settings.image_ratio }} media-mobile--{{ section.settings.mobile_image_ratio }}">
          <div class="accordion-image">
            {% assign first_tab = 1 %}
            {%- for block in section.blocks -%}
              {%- if block.type == 'tab' -%}
                {% if block.settings.tab_image %}
                  <img
                    src="{{ block.settings.tab_image | image_url }}"
                    alt="{{ block.settings.tab_image.alt | escape }}"
                    class="tab-image{% if first_tab == 1 %} active{% endif %}"
                  >
                {% else %}
                  {{
                    'hero-apparel-3'
                    | placeholder_svg_tag: 'placeholder-svg placeholder collage-card__image tab-image'
                  }}
                {% endif %}
                {% assign first_tab = 2 %}
              {%- endif -%}
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "t:sections.tab-collage.name",
  "settings": [
    {
      "type": "select",
      "id": "desktop_tab_heading_size",
      "options": [
        {
          "value": "desktop-tabhsize",
          "label": "t:sections.all.text_size.options__1.label"
        },
        {
          "value": "desktop-tabhsize2",
          "label": "t:sections.all.text_size.options__2.label"
        },
        {
          "value": "desktop-tabhsize3",
          "label": "t:sections.all.text_size.options__3.label"
        }
      ],
      "default": "desktop-tabhsize2",
      "label": "t:sections.tab-collage.settings.desktop.size_tab_heading.label"
    },

    {
      "type": "select",
      "id": "desktop_tab_content_size",
      "options": [
        {
          "value": "desktop-tabcsize",
          "label": "t:sections.all.text_size.options__1.label"
        },
        {
          "value": "desktop-tabcsize2",
          "label": "t:sections.all.text_size.options__2.label"
        },
        {
          "value": "desktop-tabcsize3",
          "label": "t:sections.all.text_size.options__3.label"
        }
      ],
      "default": "desktop-tabcsize2",
      "label": "t:sections.tab-collage.settings.desktop.size_tab_content.label"
    },

    {
      "type": "select",
      "id": "desktop-layout",
      "options": [
        {
          "value": "image_first",
          "label": "t:sections.tab-collage.settings.desktop.layout.options__1.label"
        },
        {
          "value": "image_second",
          "label": "t:sections.tab-collage.settings.desktop.layout.options__2.label"
        }
      ],
      "default": "image_second",
      "label": "t:sections.tab-collage.settings.desktop.layout.label"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "label": "t:sections.all.image_ratio.options__1.label",
          "value": "adapt"
        },
        {
          "label": "t:sections.all.image_ratio.options__2.label",
          "value": "400px"
        },
        {
          "label": "t:sections.all.image_ratio.options__3.label",
          "value": "450px"
        },
        {
          "label": "t:sections.all.image_ratio.options__4.label",
          "value": "500px"
        },
        {
          "label": "t:sections.all.image_ratio.options__5.label",
          "value": "550px"
        },
        {
          "label": "t:sections.all.image_ratio.options__6.label",
          "value": "600px"
        },
        {
          "label": "t:sections.all.image_ratio.options__7.label",
          "value": "650px"
        },
        {
          "label": "t:sections.all.image_ratio.options__8.label",
          "value": "700px"
        },
        {
          "label": "t:sections.all.image_ratio.options__9.label",
          "value": "750px"
        },
        {
          "label": "t:sections.all.image_ratio.options__10.label",
          "value": "100vh"
        }
      ],
      "default": "550px",
      "label": "t:sections.all.image_ratio.label"
    },
    {
      "type": "range",
      "id": "inner_padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "t:sections.all.padding.padding.unit",
      "label": "t:sections.all.padding.padding.label",
      "default": 40
    },
    {
      "type": "header",
      "content": "t:sections.all.mobile_layout.header.content"
    },
    {
      "type": "select",
      "id": "mobile_tab_heading_size",
      "options": [
        {
          "value": "mobile-tabhsize",
          "label": "t:sections.all.text_size.options__1.label"
        },
        {
          "value": "mobile-tabhsize2",
          "label": "t:sections.all.text_size.options__2.label"
        },
        {
          "value": "mobile-tabhsize3",
          "label": "t:sections.all.text_size.options__3.label"
        }
      ],
      "default": "mobile-tabhsize2",
      "label": "t:sections.tab-collage.settings.mobile.size_tab_heading.label"
    },

    {
      "type": "select",
      "id": "mobile_tab_content_size",
      "options": [
        {
          "value": "mobile-tabcsize",
          "label": "t:sections.all.text_size.options__1.label"
        },
        {
          "value": "mobile-tabcsize2",
          "label": "t:sections.all.text_size.options__2.label"
        },
        {
          "value": "mobile-tabcsize3",
          "label": "t:sections.all.text_size.options__3.label"
        }
      ],
      "default": "mobile-tabcsize2",
      "label": "t:sections.tab-collage.settings.mobile.size_tab_content.label"
    },

    {
      "type": "select",
      "id": "mobile_image_ratio",
      "options": [
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__1.label",
          "value": "auto"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__2.label",
          "value": "200px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__3.label",
          "value": "250px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__4.label",
          "value": "300px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__5.label",
          "value": "400px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__6.label",
          "value": "500px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__7.label",
          "value": "600px"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__8.label",
          "value": "100vh"
        },
        {
          "label": "t:sections.all.mobile_layout.mobile_image_ratio.options__9.label",
          "value": "adapt"
        }
      ],
      "default": "auto",
      "label": "t:sections.all.mobile_layout.mobile_image_ratio.label"
    },
    {
      "type": "select",
      "id": "mobile-layout",
      "options": [
        {
          "value": "image_first",
          "label": "t:sections.tab-collage.settings.mobile.layout.options__1.label"
        },
        {
          "value": "image_second",
          "label": "t:sections.tab-collage.settings.mobile.layout.options__2.label"
        }
      ],
      "default": "image_first",
      "label": "t:sections.tab-collage.settings.mobile.layout.label"
    },
    {
      "type": "range",
      "id": "innner_mobile_padding",
      "min": 0,
      "max": 80,
      "unit": "t:sections.all.padding.padding.unit",
      "label": "t:sections.all.padding.padding.label",
      "default": 20
    },
    {
      "type": "header",
      "content": "t:sections.all.colors.header.content"
    },
    {
      "type": "checkbox",
      "id": "use_custom_colors",
      "default": false,
      "label": "t:sections.all.colors.use_custom_colors.label"
    },
    {
      "type": "color",
      "id": "tab_colors_heading",
      "label": "t:sections.tab-collage.settings.colors.tab_heading.label",
      "default": "#212326"
    },
    {
      "type": "color",
      "id": "tab_colors_text",
      "label": "t:sections.tab-collage.settings.colors.tab_content.label",
      "default": "#212326"
    },
    {
      "type": "color",
      "id": "tab_colors_border",
      "label": "t:sections.tab-collage.settings.colors.tab_border.label",
      "default": "#212326"
    },
    {
      "type": "color",
      "id": "colors_background",
      "label": "t:sections.all.colors.colors_background.label",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "t:sections.tab-collage.blocks.tab.label",
      "limit": 5,
      "settings": [
        {
          "type": "text",
          "id": "tab_heading",
          "label": "t:sections.tab-collage.blocks.tab.settings.heading_label",
          "default": "Tab Heading"
        },
        {
          "type": "richtext",
          "id": "tab_content",
          "label": "t:sections.tab-collage.blocks.tab.settings.content_label",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
        },
        {
          "type": "image_picker",
          "id": "tab_image",
          "label": "t:sections.tab-collage.blocks.tab.settings.image_label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.tab-collage.presets.name",
      "blocks": [
        {
          "type": "tab"
        },
        {
          "type": "tab"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer", "custom.overlay"]
  }
}
{% endschema %}

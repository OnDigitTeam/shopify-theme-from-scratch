{{ 'component-image-with-text.css' | asset_url | stylesheet_tag }}


{% comment %}
  This section renders an image with text content, allowing for flexible layout options.
  The image can be positioned either to the left or right of the text content.
{% endcomment %}

<section id="section-{{ section.id }}" class="image-with-text-section {{ section.settings.bg_color }} {{ section.settings.image_position }} {{ section.settings.text_size }}">
  <div class="image-with-text container">
    
    {% comment %} Image first if position is 'left', else render after content {% endcomment %}
    {% if section.settings.image_position == 'left' %}
      {% render 'image-with-text-image', image: section.settings.image %}
    {% endif %}

    <div class="image-with-text__content">
      {% if section.blocks.size > 0 %}
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'heading' %}
                {% if block.settings.text != blank %}
                    <h2 class="image-with-text__heading inline-richtext">
                        {{ block.settings.text | default: 'Default Heading' }}
                    </h2>
                {% endif %}
            {% when 'caption' %}
                {% if block.settings.text != blank %}
                    <div class="image-with-text__caption image-with-text__text image-with-text__text--caption ">
                        {{ block.settings.text | default: 'Default Caption' }}
                    </div>
                {% endif %}    
            {% when 'text' %}
                {% if block.settings.text != blank %}
                    <div class="image-with-text__text rte">
                        {{ block.settings.text | default: 'Default body text content.' }}
                    </div>
                {% endif %} 
            {% when 'button' %}
                {%- if block.settings.button_label != blank -%}
                    
                    <a href="{{ block.settings.link | default: '#' }}" class="btn button--secondary {{ block.settings.custom_class }}">
                        {{ block.settings.text | default: 'Default Button' }}
                    </a>
                {%- endif -%}
          {% endcase %}
        {% endfor %}
      {% endif %}
    </div>

    {% if section.settings.image_position == 'right' %}
      {% render 'image-with-text-image', image: section.settings.image %}
    {% endif %}

  </div>
</section>



{% schema %}
{
  "name": "t:sections.image_with_text.name",
  "settings": [
    {
  "type": "select",
  "id": "image_position",
  "label": "Image Position",
  "default": "left",
  "options": [
    { "value": "left", "label": "Left" },
    { "value": "right", "label": "Right" }
  ]
},
{
  "type": "select",
  "id": "bg_color",
  "label": "Background Color",
  "default": "bg-white",
  "options": [
    { "value": "bg-white", "label": "White" },
    { "value": "bg-gray", "label": "Gray" },
    { "value": "bg-black", "label": "Black" }
  ]
},
{
  "type": "select",
  "id": "text_size",
  "label": "Text Size",
  "default": "text-medium",
  "options": [
    { "value": "text-small", "label": "Small" },
    { "value": "text-medium", "label": "Medium" },
    { "value": "text-large", "label": "Large" }
  ]
},
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.image_with_text.settings.image.label"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "t:sections.image_with_text.blocks.heading.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.image_with_text.blocks.heading.label",
          "default": "Heading text"
        }
      ]
    },
    {
      "type": "caption",
      "name": "t:sections.image_with_text.blocks.caption.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.image_with_text.blocks.caption.label",
          "default": "Caption text"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.image_with_text.blocks.text.name",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "t:sections.image_with_text.blocks.text.label",
          "default": "Body text"
        }
      ]
    },
    {
      "type": "button",
      "name": "t:sections.image_with_text.blocks.button.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "t:sections.image_with_text.blocks.button.label",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.image_with_text.blocks.button.link"
        }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "t:sections.image_with_text.presets.default.name",
      "blocks": [
        { "type": "heading" },
        { "type": "caption" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}
